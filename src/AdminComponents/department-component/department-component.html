<div class="department-container">
    <div class="header">
      <h1>Department Management</h1>
      <button class="btn-primary" (click)="openAddModal()">
        <span class="icon">+</span> Add Department
      </button>
    </div>
  
    <div class="departments-grid">
      <div class="department-card" *ngFor="let dept of departments">
        <div class="card-header">
          <div class="dept-title">
            <div class="icon-wrapper">
              <i [class]="dept.icon"></i>
            </div>
            <div class="title-info">
              <h3>{{ dept.name }}</h3>
              <span class="specialist-badge">{{ dept.specialists }} Specialist</span>
            </div>
          </div>
          <div class="card-actions">
            <button class="btn-icon btn-edit" (click)="openEditModal(dept)" title="Edit">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
              </svg>
            </button>
            <button class="btn-icon btn-delete" (click)="deleteDepartment(dept.id)" title="Delete">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
              </svg>
            </button>
          </div>
        </div>
  
        <p class="description">{{ dept.description }}</p>
  
        <div class="services-section">
          <h4 class="services-title">Services Offered</h4>
          <div class="services-list">
            <span class="service-tag" *ngFor="let service of dept.services">
              {{ service }}
            </span>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Modal -->
    <div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2>{{ editingDepartment ? 'Edit Department' : 'Add New Department' }}</h2>
          <button class="btn-close" (click)="closeModal()">&times;</button>
        </div>
  
        <div class="modal-body">
          <div class="form-group">
            <label>Department Name *</label>
            <input 
              type="text" 
              [(ngModel)]="newDepartment.name" 
              placeholder="e.g., Cardiologist"
              class="form-input"
            />
          </div>
  
          <div class="form-group">
            <label>Description *</label>
            <textarea 
              [(ngModel)]="newDepartment.description" 
              placeholder="Brief description of the department and its services"
              class="form-textarea"
              rows="4"
            ></textarea>
          </div>
  
          <div class="form-group">
            <label>Icon Class</label>
            <input 
              type="text" 
              [(ngModel)]="newDepartment.icon" 
              placeholder="e.g., fas fa-heartbeat"
              class="form-input"
            />
            <small class="form-hint">FontAwesome class name</small>
          </div>
  
          <div class="form-group">
            <label>Services Offered</label>
            <div class="service-input">
              <input 
                type="text" 
                [(ngModel)]="newService" 
                placeholder="e.g., ECG, Echocardiography"
                class="form-input"
                (keyup.enter)="addService()"
              />
              <button class="btn-add-service" (click)="addService()">Add</button>
            </div>
            
            <div class="selected-services" *ngIf="newDepartment.services.length > 0">
              <div class="selected-service" *ngFor="let service of newDepartment.services; let i = index">
                <span>{{ service }}</span>
                <button class="btn-remove-service" (click)="removeService(i)">&times;</button>
              </div>
            </div>
          </div>
        </div>
  
        <div class="modal-footer">
          <button class="btn-secondary" (click)="closeModal()">Cancel</button>
          <button class="btn-primary" (click)="saveDepartment()">
            {{ editingDepartment ? 'Update Department' : 'Add Department' }}
          </button>
        </div>
      </div>
    </div>
  </div>